<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Move Water Move</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: #f0f0f0;
    }
    h1 {
      margin-top: 1em;
    }
    .board {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 20px auto;
    }
    .bowl {
      position: absolute;
      width: 110px;
      height: 110px;
      border-radius: 50%;
      border: 4px solid #999;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      background: white;
      flex-direction: column;
    }
    .bowl .label {
      font-size: 14px;
      margin-top: 5px;
    }
    .bowl.current {
      border-color: blue;
    }
    .controls {
      margin: 20px;
    }
    .log {
      width: 90%;
      max-width: 500px;
      height: 200px;
      margin: 20px auto;
      background: white;
      border: 1px solid #ccc;
      overflow-y: auto;
      padding: 10px;
      text-align: left;
      display: flex;
      flex-direction: column-reverse;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <h1>Move Water Move</h1>
  <div class="board">
    <div class="bowl" id="bowl1" style="top: 0; left: 95px;"></div>
    <div class="bowl" id="bowl2" style="top: 170px; left: 0;"></div>
    <div class="bowl" id="bowl3" style="top: 170px; left: 190px;"></div>
  </div>
  <div class="controls">
    <button onclick="rollDice()">Roll Dice 🎲</button>
    <button onclick="restartGame()">Restart</button>
    <p id="status"></p>
    <p id="element"></p>
    <p id="seeds"></p>
  </div>
  <div class="log" id="log"></div>
  <script>
    const elements = ['Rain', 'River', 'Clouds'];
    const symbols = { Rain: '🌧️', River: '🌊', Clouds: '☁️' };
    const bowls = [
      { id: 'bowl1', owner: 'Osi', seeds: 0, element: 'Rain' },
      { id: 'bowl2', owner: 'Player', seeds: 0, element: 'River' },
      { id: 'bowl3', owner: 'Obasa', seeds: 0, element: 'Clouds' },
    ];
    let playerIndex = 1;
    let seedsToPlace = 0;function updateBoard() {
  bowls.forEach((bowl, index) => {
    const el = document.getElementById(bowl.id);
    el.innerHTML = `${symbols[bowl.element]}<br>${bowl.seeds}<div class="label">${bowl.element} (${bowl.owner})</div>`;
    el.className = 'bowl';
    if (index === playerIndex) el.classList.add('current');
    el.onclick = () => {
      if (seedsToPlace > 0) {
        bowl.seeds++;
        seedsToPlace--;
        updateBoard();
        if (seedsToPlace === 0) checkWin(bowl);
      }
    };
  });
  document.getElementById('element').innerText = `Your element: ${bowls[playerIndex].element}`;
  document.getElementById('seeds').innerText = `Seeds left: ${seedsToPlace}`;
}

function rollDice() {
  if (seedsToPlace > 0) return;
  const roll = Math.floor(Math.random() * 6) + 1;
  if (roll === 1) {
    playerIndex = (playerIndex + 1) % 3;
    logMessage(`You rolled a 1. Rotating to ${bowls[playerIndex].element}.`);
    updateBoard();
    runAITurns();
    return;
  }
  seedsToPlace = roll;
  updateBoard();
  logMessage(`You rolled a ${roll}. Tap a bowl to place seeds.`);
}

function checkWin(bowl) {
  if (bowl.seeds >= 21) {
    logMessage(`${bowl.owner} wins with ${bowl.element}!`);
    seedsToPlace = 0;
  } else {
    runAITurns();
  }
}

async function runAITurns() {
  for (let i = 0; i < 3; i++) {
    if (i === playerIndex) continue;
    const bowl = bowls[i];
    await sleep(1000);
    const roll = Math.floor(Math.random() * 6) + 1;
    logMessage(`${bowl.owner} rolls ${roll}`);
    if (roll === 1) {
      bowl.element = elements[(elements.indexOf(bowl.element) + 1) % 3];
      logMessage(`${bowl.owner} rotates to ${bowl.element}`);
      updateBoard();
      continue;
    }
    let placed = 0;
    if (bowl.seeds + roll === 21) {
      bowl.seeds += roll;
      logMessage(`${bowl.owner} places ${roll} seeds in ${bowl.element}`);
    } else {
      let toSelf = Math.floor(Math.random() * (roll + 1));
      bowl.seeds += toSelf;
      logMessage(`${bowl.owner} places ${toSelf} seeds in ${bowl.element}`);
    }
    updateBoard();
    if (bowl.seeds >= 21) {
      logMessage(`${bowl.owner} wins with ${bowl.element}!`);
      break;
    }
    await sleep(1000);
  }
}

function logMessage(msg) {
  const log = document.getElementById('log');
  const line = document.createElement('div');
  typeText(line, msg);
  log.prepend(line);
}

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function typeText(el, text, i = 0) {
  if (i < text.length) {
    el.innerHTML += text.charAt(i);
    setTimeout(() => typeText(el, text, i + 1), 30);
  }
}

function restartGame() {
  bowls.forEach(bowl => bowl.seeds = 0);
  bowls[0].element = 'Rain';
  bowls[1].element = 'River';
  bowls[2].element = 'Clouds';
  playerIndex = 1;
  seedsToPlace = 0;
  updateBoard();
  document.getElementById('log').innerHTML = '';
}

updateBoard();

  </script>
</body>
</html>
